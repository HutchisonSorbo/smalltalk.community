
> smalltalk.community@1.0.0 test
> vitest run --coverage


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90m/home/ryan/Documents/Projects/smalltalk.community[39m
      [2mCoverage enabled with [22m[33mistanbul[39m

 [32mâœ“[39m tests/unit/validation.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 43[2mms[22m[39m
 [32mâœ“[39m tests/unit/models/engagement.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m tests/unit/utils/au-validation.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 94[2mms[22m[39m
 [32mâœ“[39m tests/unit/onboarding-schemas.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 81[2mms[22m[39m
 [31mâ¯[39m tests/integration/features/CommunicationLog.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 285[2mms[22m[39m
[31m     [31mÃ—[31m renders logs correctly[39m[32m 216[2mms[22m[39m
[31m     [31mÃ—[31m shows correct status badges[39m[32m 36[2mms[22m[39m
[31m     [31mÃ—[31m displays empty state message when no logs provided[39m[32m 21[2mms[22m[39m
[90mstdout[2m | tests/integration/features/referral-bridge.test.ts[2m > [22m[2mService Referral Bridge[2m > [22m[2msuccessfully bridges public referral to internal tenant storage
[22m[39m[IntegrationBridge] Bridged referral for Test Member to tenant tenant-123

 [32mâœ“[39m tests/integration/features/referral-bridge.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m tests/unit/rate-limiter.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m tests/unit/age-utils.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 43[2mms[22m[39m
 [32mâœ“[39m tests/unit/lib/dittoSync.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m tests/unit/utils.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32mâœ“[39m tests/unit/utils/age-cohort.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m tests/unit/utils/privacy.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m tests/unit/lib/tenant.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 11[2mms[22m[39m
[90mstdout[2m | tests/unit/performance.test.ts[2m > [22m[2mPerformance Critical Paths[2m > [22m[2mgetAverageRating[2m > [22m[2mshould use caching to reduce DB hits
[22m[39mgetAverageRating latency (2 calls, 1 cached): 1.1034319999998843ms

 [32mâœ“[39m tests/unit/performance.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 12[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Suites 1 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m tests/integration/components/member-form.test.tsx[2m [ tests/integration/components/member-form.test.tsx ][22m
[31m[1mError[22m: Failed to resolve import "@testing-library/user-event" from "tests/integration/components/member-form.test.tsx". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36m/home/ryan/Documents/Projects/smalltalk.community/tests/integration/components/member-form.test.tsx[39m:3:22
[33m  1  |  import { jsxDEV } from "react/jsx-dev-runtime";
  2  |  import { render, screen, waitFor } from "@testing-library/react";
  3  |  import userEvent from "@testing-library/user-event";
     |                         ^
  4  |  import { MemberForm } from "@/components/communityos/member-form";
  5  |  import { describe, it, expect, vi } from "vitest";[39m
[90m [2mâ¯[22m TransformPluginContext._formatLog node_modules/vite/dist/node/chunks/config.js:[2m28998:43[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error node_modules/vite/dist/node/chunks/config.js:[2m28995:14[22m[39m
[90m [2mâ¯[22m normalizeUrl node_modules/vite/dist/node/chunks/config.js:[2m27118:18[22m[39m
[90m [2mâ¯[22m node_modules/vite/dist/node/chunks/config.js:[2m27176:32[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform node_modules/vite/dist/node/chunks/config.js:[2m27144:4[22m[39m
[90m [2mâ¯[22m EnvironmentPluginContainer.transform node_modules/vite/dist/node/chunks/config.js:[2m28796:14[22m[39m
[90m [2mâ¯[22m loadAndTransform node_modules/vite/dist/node/chunks/config.js:[2m22669:26[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯[22m[39m


[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 3 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m tests/integration/features/CommunicationLog.test.tsx[2m > [22mCommunication Log Feature[2m > [22mrenders logs correctly
[31m[1mError[22m: Invalid Chai property: toBeInTheDocument[39m
[36m [2mâ¯[22m tests/integration/features/CommunicationLog.test.tsx:[2m15:44[22m[39m
    [90m 13| [39m        [34mrender[39m([33m<[39m[33mCommunicationLog[39m [33mlogs[39m[33m=[39m[33m{[39mmockLogs[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
    [90m 14| [39m
    [90m 15| [39m        [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/welcome/i[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m 16| [39m        [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/reminder/i[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m 17| [39m        [34mexpect[39m(screen[33m.[39m[34mgetAllByTestId[39m([32m'log-item'[39m))[33m.[39m[34mtoHaveLength[39m([34m2[39m)[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/features/CommunicationLog.test.tsx[2m > [22mCommunication Log Feature[2m > [22mshows correct status badges
[31m[1mError[22m: Invalid Chai property: toBeInTheDocument[39m
[36m [2mâ¯[22m tests/integration/features/CommunicationLog.test.tsx:[2m24:40[22m[39m
    [90m 22| [39m        [34mrender[39m([33m<[39m[33mCommunicationLog[39m [33mlogs[39m[33m=[39m[33m{[39mmockLogs[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
    [90m 23| [39m
    [90m 24| [39m        [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m'Sent'[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                                       [31m^[39m
    [90m 25| [39m        [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m'Draft'[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m 26| [39m    })[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/features/CommunicationLog.test.tsx[2m > [22mCommunication Log Feature[2m > [22mdisplays empty state message when no logs provided
[31m[1mError[22m: Invalid Chai property: toBeInTheDocument[39m
[36m [2mâ¯[22m tests/integration/features/CommunicationLog.test.tsx:[2m30:64[22m[39m
    [90m 28| [39m    [34mit[39m([32m'displays empty state message when no logs provided'[39m[33m,[39m () [33m=>[39m {
    [90m 29| [39m        [34mrender[39m([33m<[39m[33mCommunicationLog[39m [33mlogs[39m[33m=[39m[33m{[39m[][33m}[39m [33m/[39m[33m>[39m)[33m;[39m
    [90m 30| [39m        expect(screen.getByText(/no communication logs found/i)).toBeIâ€¦
    [90m   | [39m                                                               [31m^[39m
    [90m 31| [39m    })[33m;[39m
    [90m 32| [39m})[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m13 passed[39m[22m[90m (15)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m106 passed[39m[22m[90m (109)[39m
[2m   Start at [22m 19:08:26
[2m   Duration [22m 39.13s[2m (transform 14.57s, setup 1.11s, import 23.98s, tests 781ms, environment 59.31s)[22m

